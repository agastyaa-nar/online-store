RewriteEngine On

# Force all requests through index.php for proper CORS handling
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L]

# Handle specific API endpoints
RewriteRule ^auth\.php$ index.php [QSA,L]
RewriteRule ^products\.php$ index.php [QSA,L]
RewriteRule ^categories\.php$ index.php [QSA,L]
RewriteRule ^cart\.php$ index.php [QSA,L]
RewriteRule ^orders\.php$ index.php [QSA,L]

# Block direct access to sensitive folders
RewriteCond %{REQUEST_URI} ^/(config|database|\.env)
RewriteRule ^(.*)$ - [F,L]
